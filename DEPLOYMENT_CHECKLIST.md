# Deployment Checklist for Stock Analyzer

## Pre-Deployment Checklist

### 1. Code Repository
- [ ] All code is committed to GitHub repository
- [ ] Repository is public or Render has access
- [ ] No sensitive data (API keys, passwords) in code
- [ ] .gitignore is properly configured

### 2. Environment Configuration
- [ ] .env.example file created with required variables
- [ ] MongoDB Atlas cluster created and configured
- [ ] Database user created with read/write permissions
- [ ] Network access configured (0.0.0.0/0 for Render)
- [ ] Connection string tested locally

### 3. Application Configuration
- [ ] Flask app configured for production (HTTPS cookies, etc.)
- [ ] CORS configured for Render domains
- [ ] Static file serving configured
- [ ] Port configuration using environment variable
- [ ] All routes tested locally

### 4. Dependencies
- [ ] backend/requirements.txt is complete and up-to-date
- [ ] frontend/package.json dependencies are correct
- [ ] All Python packages can be installed from requirements.txt
- [ ] All Node.js packages can be installed from package.json

### 5. Build Configuration
- [ ] render.yaml file is properly configured
- [ ] Build commands tested locally
- [ ] Frontend builds successfully (npm run build)
- [ ] Backend starts with gunicorn
- [ ] Health check endpoints working

## Deployment Steps

### Step 1: Final Testing
```bash
# Test frontend build
cd frontend
npm ci
npm run build
ls -la dist/  # Verify build files exist

# Test backend with production settings
cd ../backend
pip install -r requirements.txt
FLASK_ENV=production python app.py
```

### Step 2: Environment Variables Setup
Create these in Render dashboard:
```
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/stock_analyzer
SECRET_KEY=auto-generated-by-render
FLASK_ENV=production
NODE_ENV=production
MONGO_DB=stock_analyzer
```

### Step 3: Deploy to Render
- [ ] Connect GitHub repository to Render
- [ ] Use Blueprint deployment with render.yaml
- [ ] Set environment variables in Render dashboard
- [ ] Monitor build logs for any errors
- [ ] Test deployed application

### Step 4: Post-Deployment Verification
- [ ] Application loads at Render URL
- [ ] Database connection working (check logs)
- [ ] User registration/login works
- [ ] Stock search functionality works
- [ ] Portfolio management works
- [ ] AI predictions work
- [ ] All API endpoints respond correctly

## Environment Variables Reference

| Variable | Description | Example |
|----------|-------------|---------|
| `MONGODB_URI` | MongoDB connection string | `mongodb+srv://user:pass@cluster.mongodb.net/stock_analyzer` |
| `SECRET_KEY` | Flask secret key | Auto-generated by Render |
| `FLASK_ENV` | Flask environment | `production` |
| `NODE_ENV` | Node.js environment | `production` |
| `MONGO_DB` | Database name | `stock_analyzer` |
| `PORT` | Server port | Auto-set by Render |
| `RENDER` | Render platform indicator | Auto-set by Render |

## Common Issues and Solutions

### Build Issues
**Problem**: Node.js build fails
**Solution**: Check Node.js version in render.yaml (should be 18+)

**Problem**: Python dependencies fail to install
**Solution**: Check requirements.txt for conflicting versions

### Database Issues
**Problem**: MongoDB connection fails
**Solution**: 
1. Verify MONGODB_URI format
2. Check MongoDB Atlas network access (allow 0.0.0.0/0)
3. Verify database user permissions

### Frontend Issues
**Problem**: React app shows blank page
**Solution**:
1. Check if frontend/dist folder was created during build
2. Verify Flask static file configuration
3. Check browser console for errors

### CORS Issues
**Problem**: API calls fail from frontend
**Solution**:
1. Verify CORS configuration in app.py
2. Check if Render domain is included in allowed origins
3. Ensure credentials support is enabled

## Performance Optimization

### Frontend
- [ ] Code splitting configured
- [ ] Images optimized
- [ ] Bundle size analyzed
- [ ] Service worker for caching (optional)

### Backend
- [ ] Database indexes created
- [ ] Query optimization
- [ ] Caching strategy implemented
- [ ] Background task optimization

## Security Checklist
- [ ] Environment variables properly set
- [ ] HTTPS enabled (automatic on Render)
- [ ] Secure session cookies in production
- [ ] CORS properly configured
- [ ] No sensitive data in client-side code
- [ ] Database user has minimal required permissions

## Monitoring and Maintenance
- [ ] Application logs monitored in Render dashboard
- [ ] Database performance monitored
- [ ] Uptime monitoring set up (optional)
- [ ] Error tracking configured (optional)
- [ ] Backup strategy for database

## Scaling Considerations
- [ ] Database connection pooling configured
- [ ] Static file CDN (if needed for high traffic)
- [ ] Caching layer (Redis) if performance issues
- [ ] Render plan upgrade if needed for higher traffic

## Documentation
- [ ] README.md updated with deployment instructions
- [ ] API documentation created/updated
- [ ] User manual updated
- [ ] Technical documentation complete

---

## Quick Deploy Commands

```bash
# Quick deployment test
npm run build  # Build frontend
cd backend && python app.py  # Test backend

# Production simulation
FLASK_ENV=production NODE_ENV=production npm run build
cd backend && gunicorn --bind 0.0.0.0:3001 app:app
```

**Your Stock Analyzer is now ready for production deployment! ðŸš€**
